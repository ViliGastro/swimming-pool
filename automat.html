<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ƒåejs 27</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: url('background.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
    }

    .container {
      width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: rgba(0, 0, 0, 0.8);
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
    }

    h1 {
      color: gold;
      text-shadow: 0 0 10px gold, 0 0 20px orange;
      margin-bottom: 10px;
    }

    .slot-machine {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }

    .reel {
      width: 100px;
      height: 300px;
      overflow: hidden;
      background-color: #111;
      border: 2px solid #333;
      border-radius: 10px;
      box-shadow: inset 0 0 15px black;
      position: relative;
    }

    .symbols {
      position: absolute;
      top: 0;
      width: 100%;
      display: flex;
      flex-direction: column;
    }

    .symbol {
      width: 100%;
      height: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 40px;
      color: white;
      text-shadow: 0 0 10px black;
    }

    .controls {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
    }

    .bet-button {
      padding: 8px 16px;
      font-size: 16px;
      font-weight: bold;
      color: white;
      background-color: gold;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }

    .bet-button:hover {
      background-color: orange;
    }

    .spin-button {
      padding: 12px 40px;
      font-size: 20px;
      font-weight: bold;
      color: white;
      background-color: gold;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }

    .spin-button:hover {
      background-color: orange;
    }

    .credits, .result {
      font-size: 20px;
      margin: 10px 0;
      text-shadow: 0 0 5px white;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ƒåejs 27</h1>
    <div class="credits" id="credits">Kredit: 100</div>
    <div>Cena otoƒçenia: <span id="betAmount">10</span> kreditov</div>

    <!-- Trojica valcov -->
    <div class="slot-machine">
      <div class="reel" id="reel1">
        <div class="symbols"></div>
      </div>
      <div class="reel" id="reel2">
        <div class="symbols"></div>
      </div>
      <div class="reel" id="reel3">
        <div class="symbols"></div>
      </div>
    </div>

    <!-- Ovl√°dacie tlaƒçidl√° -->
    <div class="controls">
      <button class="bet-button" onclick="decreaseBet()">-</button>
      <button class="spin-button" onclick="spin()">Toƒçi≈•</button>
      <button class="bet-button" onclick="increaseBet()">+</button>
    </div>

    <div class="result" id="result">Kliknite na "Toƒçi≈•" pre zaƒçiatok!</div>
  </div>

  <script>
    const reels = document.querySelectorAll('.reel');
    const creditsDisplay = document.getElementById('credits');
    const betAmountDisplay = document.getElementById('betAmount');
    const resultDisplay = document.getElementById('result');

    let credits = 100;
    let betAmount = 10;

    // Zoznam symbolov vr√°tane "Wild"
    const allSymbols = ["üçí", "üçã", "üçá", "üçâ", "‚≠ê", "Wild"];

    // Na zaƒçiatku napln√≠me valce
    window.onload = () => {
      reels.forEach((reel) => {
        generateRandomSymbols(reel);
      });
    };

    // Funkcia na n√°hodn√© naplnenie jedn√©ho valca
    function generateRandomSymbols(reel) {
      const symbolsContainer = reel.querySelector('.symbols');
      symbolsContainer.innerHTML = ""; // vyƒçisti star√© symboly

      // Vygenerujeme 5 symbolov n√°hodne
      for (let i = 0; i < 5; i++) {
        const randomSymbol = allSymbols[Math.floor(Math.random() * allSymbols.length)];
        const symbolDiv = document.createElement('div');
        symbolDiv.classList.add('symbol');
        symbolDiv.textContent = randomSymbol;
        symbolsContainer.appendChild(symbolDiv);
      }
    }

    function spin() {
      if (credits < betAmount) {
        resultDisplay.textContent = 'Nem√°te dostatok kreditov!';
        resultDisplay.style.color = 'red';
        return;
      }

      credits -= betAmount;
      creditsDisplay.textContent = `Kredit: ${credits}`;
      resultDisplay.textContent = 'Toƒç√≠me...';
      resultDisplay.style.color = 'white';

      // Spust√≠me anim√°ciu na ka≈ædom valci
      // a keƒè sa v≈°etky dokonƒçia, zavol√°me checkWin()
      let completed = 0;
      reels.forEach((reel, index) => {
        spinReelAnimation(reel, () => {
          completed++;
          if (completed === reels.length) {
            checkWin();
          }
        });
      });
    }

    /**
     * Anim√°cia toƒçenia valca na 3 sekundy (zr√Ωchlenie -> najr√Ωchlej≈°√≠ bod -> spomalenie).
     * V strede anim√°cie (okolo 50%) vymen√≠ symboly za nov√©.
     */
    function spinReelAnimation(reel, onComplete) {
      const symbolsContainer = reel.querySelector('.symbols');
      const startTime = performance.now();
      const duration = 3000; // 3 sekundy

      // Aby sme videli naozajstn√∫ zmenu symbolov, na zaƒçiatku nech√°me
      // star√© symboly a v polovici anim√°cie tie symboly vymen√≠me.
      let symbolsChanged = false;

      function animate(time) {
        let elapsed = time - startTime;
        if (elapsed > duration) elapsed = duration; // Neprekroƒçi≈• dƒ∫≈æku anim√°cie

        // 0.0 -> 1.0
        const progress = elapsed / duration;

        // Jednoduch√° funkcia zr√Ωchlenia/spomalenia (ease-in-out)
        // M√¥≈æete experimentova≈• s in√Ωmi funkciami (napr. sinus, cubic-bezier atƒè.)
        const eased = easeInOutQuad(progress);

        // Rozsah "ot√°ƒçania" ‚Äì ƒç√≠m v√§ƒç≈°√≠, t√Ωm viac "otoƒçen√≠" valca
        const maxOffset = 1600; 
        // Pre demon≈°tr√°ciu je 1600px, ƒço je zhruba 16x 100px panel. 
        // Vƒèaka tomu to bude vyzera≈•, ≈æe sa valec toƒç√≠ naozaj viackr√°t.

        // Vypoƒç√≠tame aktu√°lny offset
        const currentOffset = -maxOffset * eased;
        symbolsContainer.style.transform = `translateY(${currentOffset}px)`;

        // Niekde okolo 50% anim√°cie (keƒè je valec najr√Ωchlej≈°√≠) vymen√≠me symboly
        if (!symbolsChanged && progress >= 0.5) {
          symbolsChanged = true;
          // Vygenerujeme nov√© symboly, aby pri "najr√Ωchlej≈°om" toƒçen√≠ neboli vidie≈•
          generateRandomSymbols(reel);
        }

        // Po skonƒçen√≠ anim√°cie nastav√≠me offset sp√§≈• na 0
        if (elapsed < duration) {
          requestAnimationFrame(animate);
        } else {
          symbolsContainer.style.transform = 'translateY(0)';
          // Upozorn√≠me, ≈æe t√°to anim√°cia skonƒçila
          onComplete && onComplete();
        }
      }

      // Spust√≠me anim√°ciu
      requestAnimationFrame(animate);
    }

    // Jednoduch√° easing funkcia (zr√Ωchlenie/spomalenie)
    // https://easings.net/#easeInOutQuad
    function easeInOutQuad(t) {
      return t < 0.5
        ? 2 * t * t
        : 1 - Math.pow(-2 * t + 2, 2) / 2;
    }

    // Kontrola "v√Ωhry"
    function checkWin() {
      const winMultiplier = Math.random() < 0.3 ? 2 : 0; // 30% ≈°anca na dvojn√°sobok
      if (winMultiplier > 0) {
        const winAmount = betAmount * winMultiplier;
        credits += winAmount;
        resultDisplay.textContent = `Gratulujeme! Vyhrali ste ${winAmount} kreditov!`;
        resultDisplay.style.color = 'lime';
      } else {
        resultDisplay.textContent = 'Sk√∫ste to znova.';
        resultDisplay.style.color = 'red';
      }
      creditsDisplay.textContent = `Kredit: ${credits}`;
    }

    function increaseBet() {
      betAmount += 10;
      betAmountDisplay.textContent = betAmount;
    }

    function decreaseBet() {
      if (betAmount > 10) {
        betAmount -= 10;
        betAmountDisplay.textContent = betAmount;
      }
    }
  </script>
</body>
</html>
